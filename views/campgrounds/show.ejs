<% include ../partials/header %>

<% if (hotel === null) { %>

<div class="container">
    <div class="card">
        <div class="card-header">
            Error Msg
        </div>
        <div style="text-align:center" class="card-body">
            <h1>The Hotel is deleated</h1>
            <a href="/hotels" style="background-color: #263238;" class=" btn btn-raised btn-info">Go Home</a>
        </div>
    </div>
</div>

<% } else{ %>
<div style="margin-bottom:2rem;" class="container">
    <div class="card">
        <div style="margin:0;padding:0 1rem;" class="card-header">
            <h5 style="font-family: 'Bangers', cursive;font-size: 2.2em;margin:0;padding:1rem 0">
                <%=hotel.name %> ðŸ‘‡
            </h5>
        </div>
        <img class="card-img-top" src="<%=hotel.image %>" alt="<%=hotel.name %>">
        <div class="card-body">
            <div class="row">
                <div class="col-md-12">
                    <div class="thumbnail">
                        <!-- <img class="image-responsive card-image hotel_image" src="<%=hotel.image %>" /> -->
                        <div class="caption-full">
                            <h4 class="pull-right">Rs
                                <%=hotel.price %> /Day</h4>
                            <h4><a>About
                                    <%= hotel.name %></a></h4>
                            <p>
                                <%= hotel.description %>
                            </p>
                            <p>
                                <!-- <img src="data:image/png;base64,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"> -->
                                <strong> Added By
                                    <%= hotel.author.username %></strong>
                            </p>
                            <p>
                                <em> Added on
                                    <%= hotel.created_at %></em>
                            </p>
                            <% if(hotel.updated_at){ %>
                            <p>
                                <em> Updated on
                                    <%= hotel.updated_at %></em>
                            </p>
                            <% } %>
                            <% if(currentUser && hotel.author.id.equals(currentUser._id)){ %>
                            <a class="btn btn-xs btn-warning" href="/hotels/<%= hotel._id  %>/edit">Edit</a>
                            <form class="del" action="/hotels/<%=hotel._id %>?_method=DELETE" method="POST">
                                <button class="btn btn-xs btn-danger">Delete</button>
                            </form>
                            <% } %>
                        </div>
                    </div>
                    <% if(!(currentUser && hotel.author.id.equals(currentUser._id))){ %>
                    <div style="margin-bottom:1rem">
                        <a href="/hotels/<%=hotel._id %>/book">
                            <button style="background-color:#212121;" class="btn btn-xs btn-raised btn-success">Book</button>
                        </a>
                    </div>
                    <% } %>
                    <div class="well">
                        <form id="addCommentForm" action="/hotels/<%= hotel._id %>/comments" method="POST">
                            <div class="row justify-content-between">
                                <div class=" col-lg-9">
                                    <input id="inputComment" placeholder="Write new comment" name="comment[text]"
                                        required type="text" class="form-control" id="formGroupExampleInput">
                                </div>
                                <div class=" col-lg-3">
                                    <button id="addCommentButton" style="background-color: #263238;color: white;" class="btn btn-raised btn-block">Add
                                        Comment</button>
                                </div>
                            </div>
                        </form>
                        <% hotel.comments.reverse().forEach(function(comment){ %>
                        <div class="row">
                            <div class="col-md-12">
                                <div class="row">
                                    <p class="col-lg-3">
                                        <img src="data:image/png;base64,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">
                                        <strong class="align-middle">
                                            <%= comment.author.username %></strong>
                                    </p>

                                </div>
                                <p style="font-family: 'Bangers', cursive;font-size: 1.2em">
                                    <%= comment.text %>
                                </p>
                                <% if(currentUser && comment.author.id.equals(currentUser._id)){ %>
                                <a class="btn btn-xs btn-warning" href="#<%= comment._id %>" data-toggle="collapse"
                                    role="button" aria-expanded="false" aria-controls="<%= comment._id %>">
                                    Edit
                                </a>
                                <form style="display:inline;" action="/hotels/<%= hotel._id %>/comments/<%= comment._id %>?_method=DELETE"
                                    method="POST">
                                    <button class="btn btn-xs btn-danger">Delete</button>
                                </form>
                                <div class="collapse" id="<%= comment._id %>">
                                    <div class="card card-body">
                                        <form action="/hotels/<%= hotel._id %>/comments/<%= comment._id %>?_method=PUT"
                                            method="POST">

                                            <div class="row justify-content-between">
                                                <div class=" col-lg-9">
                                                    <input name="comment[text]" value="<%=comment.text %>" required
                                                        type="text" class="form-control" id="formGroupExampleInput">
                                                </div>
                                                <div class=" col-lg-3">
                                                    <button id="updateComment" style="background-color: #263238;color: white;"
                                                        class="btn btn-raised btn-block">Update
                                                        !</button>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                                <% } %>
                                <p>Added on
                                    <%= comment.comment_on %>
                                </p>
                                <% if(comment.comment_updated_on){%>
                                <p>Updated on
                                    <%= comment.comment_updated_on %>
                                </p>
                                <% } %>

                            </div>
                        </div>
                        <div class="dropdown-divider"></div>
                        <% })  %>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<% } %>

<% include ../partials/footer %>